<header *ngIf="!(user$ | async)" class="h-16 border-b border-slate-200/80 bg-white/50 backdrop-blur-sm">
  <div class="mx-auto flex h-16 max-w-7xl items-center justify-between px-4 sm:px-6 lg:px-8">
    <div class="flex items-center gap-8">
      <a class="flex items-center gap-2" routerLink="/">
        <svg class="h-8 w-8 text-sky-600" viewBox="0 0 48 48" fill="currentColor">
          <path d="M8.6 8.6A21 21 0 1 0 39.4 8.6L24 24 8.6 8.6z"></path>
        </svg>
        <span class="text-lg font-bold text-slate-900">Booklify</span>
      </a>
      <nav class="hidden md:flex items-center gap-6">
  <a class="text-sm font-medium text-slate-700 hover:text-sky-600" routerLink="/negocios">Para Negocios</a>
  <a class="text-sm font-medium text-slate-700 hover:text-sky-600" routerLink="/explorar">Explorar</a>
  <a class="text-sm font-medium text-slate-700 hover:text-sky-600" routerLink="/terminos">Términos de Servicio</a>
  <a class="text-sm font-medium text-slate-700 hover:text-sky-600" routerLink="/privacidad">Política de Privacidad</a>
      </nav>
    </div>

    <div class="flex items-center gap-4">
      <div class="relative hidden sm:block">
        <div class="pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3">
          <svg class="h-5 w-5 text-slate-400" viewBox="0 0 256 256" fill="currentColor">
            <path d="M229.66,218.34l-50.07-50.06a88.11,88.11,0,1,0-11.31,11.31l50.06,50.07a8,8,0,0,0,11.32-11.32ZM40,112a72,72,0,1,1,72,72A72.08,72.08,0,0,1,40,112Z"></path>
          </svg>
        </div>
        <input
          type="text"
          placeholder="Buscar"
          class="block w-full rounded-lg border-slate-300 bg-slate-100 py-2 pl-10 pr-3 text-sm
                 placeholder:text-slate-400 focus:border-sky-600 focus:ring-sky-600" />
      </div>
      <div class="flex items-center gap-2">
  <ng-container *ngIf="!userEmail; else logged">
          <a class="inline-flex items-center justify-center rounded-lg bg-sky-600 px-4 py-2 text-sm font-semibold text-white hover:bg-sky-500"
            routerLink="/registro">Comenzar</a>
          <a class="inline-flex items-center justify-center rounded-lg bg-slate-200 px-4 py-2 text-sm font-semibold text-slate-700 hover:bg-slate-300"
             routerLink="/login">Iniciar sesión</a>
        </ng-container>
        <ng-template #logged>
          <div class="flex items-center gap-3">
            <div class="hidden sm:flex items-center gap-3">
              <select [(ngModel)]="selectedStore" (ngModelChange)="onStoreChange($event)" class="rounded-lg border border-slate-200 bg-white px-2 py-1 text-sm">
                <option value="">Seleccionar tienda</option>
                <option *ngFor="let s of stores" [value]="s.id">{{ s.name }}</option>
              </select>
              <img [src]="avatarSrc" alt="avatar" class="h-8 w-8 rounded-full" />
            </div>
            <span class="text-sm text-slate-700 dark:text-slate-200">Hola, <strong class="ml-1">{{ fullName }}</strong></span>
            <button (click)="logout()" class="inline-flex items-center justify-center rounded-lg bg-slate-200 px-3 py-2 text-sm font-medium text-slate-700 hover:bg-slate-300">Cerrar sesión</button>
          </div>
        </ng-template>
      </div>
    </div>
  </div>
</header>
